<div ng-controller="dashboardScheduleCtrl as vm">
  <!-- <link href="https://unpkg.com/bootstrap@3/dist/css/bootstrap.css" rel="stylesheet"> -->
  <style type="text/css">
    .cal-day-hour-part-time strong.ng-hide {
      display: block !important;
    }

    .cal-day-hour-part-time {
      background-color: skyblue;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    /* .day-event {
      width: 90% !important;
    } */

    .cal-day-open {
      background: #ff7777;
    }
  </style>
  <section id="main-content">
    <section class="wrapper">

      <div class="col-lg-12">
        <h3 class="page-header">
          <i class="fa fa-user-md"></i>Schedule Meeting</h3>
      </div>
      <!-- <h2 ng-if="userLoginType=='teacher'" class="text-center">Select Student</h2>
      <h2 ng-if="userLoginType=='studParent'" class="text-center">Select Teacher</h2> -->
      <div class="row" ng-if="userLoginType=='admin' || userLoginType=='teacher' || userLoginType=='studParent'">
        <div class="col-md-8 portlets">
          <div class="panel panel-default">
            <div class="panel-heading">
              <div class="panel-actions">
                <h2 ng-if="calendarOwner!='Your'">
                  <strong>{{ vm.calendarTitle }}({{calendarOwner}})</strong>
                </h2>
                <h2 ng-if="calendarOwner=='Your'">
                  <strong>{{ vm.calendarTitle }}</strong>
                </h2>
                <a href="#" class="wminimize">
                  <i class="fa fa-chevron-up"></i>
                </a>

              </div>
            </div>


            <div class="panel-heading" style="height: 50px;">
              <div class="panel-actions">
                <div style="float:left !important;">

                  <select class="btn btn-danger" ng-if="userLoginType=='teacher'" placeholder="select" ng-model="cssSelect" ng-change="getStudListForCS(cssSelect)"
                    ng-options="css as css.class+ '-' + css.section + '-' + css.subject for css in teacherData[0].css">
                    <option value="" disabled selected>Class</option>
                  </select>


                  <select class="btn" ng-if="userLoginType=='teacher'" placeholder="select" ng-model="csSelect" ng-change="getStudentCalendar(csSelect)"
                    ng-options="cs as cs.name + '-' + cs.studId for cs in studList">
                    <option value="" disabled selected>Student</option>
                  </select>


                  <select class="btn-danger" ng-if="userLoginType=='studParent'" placeholder="select" ng-model="cssSelect" ng-change="getTeacherCalendar(cssSelect)"
                    ng-options="cs as cs.name + '-' + cs.teacherId+'-'+cs.subject for cs in teacherList">
                    <option value="" disabled selected>Teacher</option>
                  </select>

                </div>
                <div style="float:right !important;">
                  <button class="btn btn-primary" ng-if="calendarOwner!='Your'" ng-click="eventGet()">My Calendar</button>
                  <button class="btn btn-primary" style="float:right;" ng-if="calendarOwner!='Your' && teacherPersonalData[0].teacherName != null"
                    data-target="#timeTable_modal" data-toggle="modal">Teacher Time Table</button>

                  <button class="btn btn-primary" ng-if="calendarOwner=='Your' && userLoginType=='studParent' && teacherPersonalData[0].teacherName != null"
                    ng-click="getSTCalendar()">{{teacherPersonalData[0].teacherName}} Calendar</button>
                  <button class="btn btn-primary"  ng-if="calendarOwner=='Your' && userLoginType=='teacher' && studentPersonalData[0].studName != null"
                    ng-click="getSSCalendar()">{{studentPersonalData[0].studName}} Calendar</button>

                </div>
              </div>
            </div>
            <div class="panel-heading" style="height: 50px;">
              <div class="panel-actions">
                <div class="btn-group">
                  <label class="btn uib-btn-radio" mwl-date-modifier date="vm.viewDate" decrement="vm.calendarView" ng-click="vm.cellIsOpen = false">
                    << </label>
                      <label class="btn btn-default" mwl-date-modifier date="vm.viewDate" set-to-today ng-click="vm.cellIsOpen = false">
                        Today
                      </label>
                      <label class="btn uib-btn-radio" mwl-date-modifier date="vm.viewDate" increment="vm.calendarView" ng-click="vm.cellIsOpen = false">
                        >>
                      </label>

                      <label class="btn btn-primary" ng-model="vm.calendarView" uib-btn-radio="'year'" ng-click="vm.cellIsOpen = false">Year</label>
                      <label class="btn btn-primary" ng-model="vm.calendarView" uib-btn-radio="'month'" ng-click="vm.cellIsOpen = false">Month</label>
                      <label class="btn btn-primary" ng-model="vm.calendarView" uib-btn-radio="'week'" ng-click="vm.cellIsOpen = false">Week</label>
                      <label class="btn btn-primary" ng-model="vm.calendarView" uib-btn-radio="'day'" ng-click="vm.cellIsOpen = false">Day</label>

                </div>
              </div>
            </div>


            <div class="panel-body">
              <!-- Widget content -->
              <mwl-calendar events="vm.events" view="vm.calendarView" view-title="vm.calendarTitle" view-date="vm.viewDate" on-event-times-changed="vm.eventTimesChanged(calendarEvent); calendarEvent.startsAt = calendarNewEventStart; calendarEvent.endsAt = calendarNewEventEnd"
                cell-is-open="vm.cellIsOpen" day-view-start="09:00" day-view-end="15:00" day-view-split="15" cell-modifier="vm.modifyCell(calendarCell)"
                cell-auto-open-disabled="true" on-date-range-select="vm.rangeSelected(calendarRangeStartDate, calendarRangeEndDate)"
                on-timespan-click="vm.timespanClicked(calendarDate)">
              </mwl-calendar>

              <!-- Below line produces calendar. I am using FullCalendar plugin. -->
              <!-- <mwl-calendar ng-if="calendarOwner=='Your'" events="vm.events" view="vm.calendarView" view-title="vm.calendarTitle" view-date="vm.viewDate"
                on-event-click="vm.eventClicked(calendarEvent)" on-event-times-changed="vm.eventTimesChanged(calendarEvent); calendarEvent.startsAt = calendarNewEventStart; calendarEvent.endsAt = calendarNewEventEnd"
                cell-is-open="vm.cellIsOpen" day-view-start="09:00" day-view-end="15:00" day-view-split="15" cell-modifier="vm.modifyCell(calendarCell)"
                cell-auto-open-disabled="true" ng-click="vm.timeClick(calendarEvent)">
              </mwl-calendar>
              <mwl-calendar ng-if="calendarOwner!='Your'" events="vm.events" view="vm.calendarView" view-title="vm.calendarTitle" view-date="vm.viewDate"
                on-event-times-changed="vm.eventTimesChanged(calendarEvent); calendarEvent.startsAt = calendarNewEventStart; calendarEvent.endsAt = calendarNewEventEnd"
                cell-is-open="vm.cellIsOpen" day-view-start="09:00" day-view-end="15:00" day-view-split="15" cell-modifier="vm.modifyCell(calendarCell)"
                cell-auto-open-disabled="true" on-date-range-select="vm.rangeSelected(calendarRangeStartDate, calendarRangeEndDate)">
              </mwl-calendar> -->

            </div>
          </div>

        </div>
      </div>

      <!-- ##### Start Time Table  ##### -->

      <div class="modal fade" id="timeTable_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:auto;">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">{{getUserData.teacherName}} Time Table</h4>
            </div>
            <div class="modal-body">
              <div class="table-responsive">

                <table class="table">

                  <thead>
                    <tr>
                      <th>Timing</th>
                      <th ng-repeat="tt in timeForPeriods">{{tt.startsAt}}-{{tt.endsAt}}</th>

                    </tr>
                  </thead>
                  <tbody>
                    <tr class="active">
                      <td>Monday</td>
                      <td ng-if="selectedDateForEvent=='Mon'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[0].Monday"
                        ng-click="timeTableForEventBook('mon',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Mon'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[0].Monday">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                    <tr class="warning">
                      <td>Tuesday</td>
                      <td ng-if="selectedDateForEvent=='Tue'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[1].Tues"
                        ng-click="timeTableForEventBook('tue',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Tue'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[1].Tues">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                    <tr class="danger">
                      <td>Wednesday</td>
                      <td ng-if="selectedDateForEvent=='Wed'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[2].Wed"
                        ng-click="timeTableForEventBook('wed',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Wed'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[2].Wed">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                    <tr class="success">
                      <td>Thursday</td>
                      <td ng-if="selectedDateForEvent=='Thu'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[3].Thurs"
                        ng-click="timeTableForEventBook('thu',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Thu'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[3].Thurs">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                    <tr class="active">
                      <td>Friday</td>
                      <td ng-if="selectedDateForEvent=='Fri'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[4].Fri"
                        ng-click="timeTableForEventBook('fri',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Fri'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[4].Fri">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                    <tr class="warning">
                      <td>Saturday</td>
                      <td ng-if="selectedDateForEvent=='Sat'" style="background-color:#558a55!important;cursor: pointer;" ng-repeat="mtt in teacherPersonalData[0].timeTable[5].Sat"
                        ng-click="timeTableForEventBook('sat',$index)">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                      <td ng-if="selectedDateForEvent!='Sat'" style="background-color:#f5f5f5!important" ng-repeat="mtt in teacherPersonalData[0].timeTable[5].Sat">{{mtt.class}}&nbsp{{mtt.section}}&nbsp{{mtt.subject}}</td>
                    </tr>
                  </tbody>

                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button data-dismiss="modal" class="btn btn-default" type="button">Close</button>
            </div>

          </div>
        </div>
      </div>
      <!-- #####  End Time Table  ##### -->

    </section>
  </section>
</div>